--[[
    Anti AFK Script
    Tự động tương tác để tránh bị Roblox kick sau 20 phút không hoạt động.
]]

local VirtualUser = game:GetService("VirtualUser")
local Players = game:GetService("Players")

-- Đợi LocalPlayer load xong
local LocalPlayer = Players.LocalPlayer
if not LocalPlayer then
    repeat wait() until Players.LocalPlayer
    LocalPlayer = Players.LocalPlayer
end

print("--> Anti AFK Script đã được kích hoạt!")

-- Cách 1: Sử dụng Event Idled (Chuẩn nhất)
-- Khi Roblox phát hiện người dùng không hoạt động, event này sẽ kích hoạt.
-- Chúng ta sẽ giả lập một cú click chuột để reset timer.
LocalPlayer.Idled:Connect(function()
    pcall(function()
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new()) -- Click chuột phải ảo
        print("Anti AFK: Đã tự động tương tác để tránh bị kick.")
    end)
end)

-- Cách 2: Vòng lặp Backup (Đề phòng trường hợp Event không nổ)
-- Thực hiện click nhẹ mỗi 10 phút
spawn(function()
    while true do
        wait(600) -- 10 phút
        pcall(function()
            VirtualUser:CaptureController()
            VirtualUser:ClickButton2(Vector2.new())
        end)
    end
end)

-- Gửi thông báo nhỏ lên màn hình (nếu hỗ trợ)
pcall(function()
    game.StarterGui:SetCore("SendNotification", {
        Title = "Anti AFK";
        Text = "Đã bật chế độ treo máy!";
        Duration = 5;
    })
end)
