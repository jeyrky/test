local plr = game.Players.LocalPlayer
local rs = game:GetService("ReplicatedStorage")
local pathfindingService = game:GetService("PathfindingService")

local function SetTeam(teamName)
    rs.Remotes.CommF_:InvokeServer("SetTeam", teamName)
end

local function MoveTo(destination)
    local humanoid = plr.Character:WaitForChild("Humanoid")
    local rootPart = humanoid.Parent:WaitForChild("HumanoidRootPart")

    local path = pathfindingService:CreatePath({
        AgentRadius = 2,
        AgentHeight = 5,
        AgentCanJump = true,
        AgentJumpHeight = 10,
        AgentMaxSlope = 45,
        })
    path:ComputeAsync(rootPart.Position, destination.Position)

    path:MoveTo(rootPart.Position)
    path:MoveTo(destination.Position)
end

local function RandomAction()
    rs.Remotes.CommF_:InvokeServer("Cousin", "Buy")
end

local function DropMultipleItemsFromBackpack(quantity)
    for _, tool in ipairs(plr.Backpack:GetChildren()) do
        if tool:IsA("Tool") then
            tool.Parent = plr.Character
            local toolInCharacter = plr.Character:FindFirstChild(tool.Name)
            if toolInCharacter then
                toolInCharacter.Parent = game.Workspace
            end
        end
    end
end

local function UnequipTools()
    for _, tool in ipairs(plr.Character:GetChildren()) do
        if tool:IsA("Tool") then
            tool.Parent = plr.Backpack
        end
    end
end

SetTeam("Pirates")
wait(1)

local destinations = {
    Vector3.new(-432.318024, 74.7125626, 336.251801),
    Vector3.new(-428.913605, 74.649498, 383.065613),
    Vector3.new(-362.51416, 74.6511688, 386.262421),
    --- Vector3.new(50, 75, 100),   -- Vị trí thứ tư đã được thay đổi
}

for i, destination in ipairs(destinations) do
    MoveTo(CFrame.new(destination))
    wait(1)  -- Chờ 1 giây trước khi thực hiện các hành động tiếp theo

    if i == 3 then
        RandomAction()
        wait(1)
        UnequipTools()
        wait(1)
        DropMultipleItemsFromBackpack(200)
        wait(2)
    end
end
