-- ðŸ”§ Tá»‘i Æ°u FPS + Táº¯t hiá»‡u á»©ng Pet - Steal a Brainrot

local Lighting = game:GetService("Lighting")
local Terrain = workspace:FindFirstChildOfClass("Terrain")
local Players = game:GetService("Players")
local UserSettings = UserSettings():GetService("UserGameSettings")
local lp = Players.LocalPlayer
game:GetService("StarterGui"):SetCoreGuiEnabled(Enum.CoreGuiType.All, false)

--âš™ï¸ Táº¯t hiá»‡u á»©ng Ã¡nh sÃ¡ng
Lighting.GlobalShadows = false
Lighting.FogEnd = 1000000
Lighting.Brightness = 0
Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)

-- âš™ï¸ Terrain Ä‘Æ¡n giáº£n hÃ³a
if Terrain then
    Terrain.WaterWaveSize = 0
    Terrain.WaterWaveSpeed = 0
    Terrain.WaterReflectance = 0
    Terrain.WaterTransparency = 1
end

-- âœ… HÃ m táº¯t hiá»‡u á»©ng: particles, trail, smoke, fire, decals, textures
local function removeEffects(obj)
    for _, v in pairs(obj:GetDescendants()) do
        if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Fire") then
            v.Enabled = false
        elseif v:IsA("PointLight") or v:IsA("SpotLight") or v:IsA("SurfaceLight") then
            v.Enabled = false
        elseif v:IsA("Decal") then
            v.Transparency = 1
        elseif v:IsA("Texture") then
            v:Destroy()
        end
    end
end

-- âš™ï¸ Gá»i hÃ m cho toÃ n bá»™ workspace (bao gá»“m cáº£ Pet)
removeEffects(workspace)

-- âš™ï¸ Tá»± Ä‘á»™ng táº¯t hiá»‡u á»©ng khi cÃ³ nhÃ¢n váº­t hoáº·c pet má»›i xuáº¥t hiá»‡n
workspace.DescendantAdded:Connect(function(obj)
    if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("PointLight") or obj:IsA("Decal") then
        task.wait(0.1)
        pcall(function()
            if obj:IsA("Texture") then obj:Destroy()
            elseif obj:IsA("Decal") then obj.Transparency = 1
            else obj.Enabled = false
            end
        end)
    end
end)

-- âš™ï¸ Giáº£m cháº¥t lÆ°á»£ng Ä‘á»“ há»a xuá»‘ng tháº¥p nháº¥t
pcall(function()
    UserSettings.SavedQualityLevel = Enum.SavedQualitySetting.QualityLevel1
end)

-- âš™ï¸ Khi nhÃ¢n váº­t má»›i spawn
lp.CharacterAdded:Connect(function(char)
    removeEffects(char)
end)

-- ============================
-- Táº®T MÃ€U HIá»†U á»¨NG Cá»¦A PET
-- ============================

local function disablePetEffects(pet)
    if not pet then return end
    for _, v in pairs(pet:GetDescendants()) do
        if v:IsA("ParticleEmitter") then
            v.Enabled = false
        elseif v:IsA("Light") then
            v.Enabled = false
        elseif v:IsA("Decal") then
            v.Transparency = 1
        elseif v:IsA("Texture") then
            v:Destroy()
        end
        -- ThÃªm cÃ¡c pháº§n tá»­ khÃ¡c náº¿u Pet cá»§a báº¡n cÃ²n hiá»‡u á»©ng mÃ u khÃ¡c
    end
end

-- Giáº£ sá»­ tÃªn Pet lÃ  "Pet" hoáº·c báº¡n biáº¿t cÃ¡ch xÃ¡c Ä‘á»‹nh Ä‘Ãºng object cá»§a Pet
-- Náº¿u khÃ´ng rÃµ, báº¡n cÃ³ thá»ƒ chá»‰nh theo tÃªn hoáº·c cáº¥u trÃºc cá»§a Pet trong game
local function checkAndDisablePet()
    local pet = workspace:FindFirstChild("Pet") -- Thay "Pet" báº±ng tÃªn Ä‘Ãºng cá»§a Pet
    if pet then
        disablePetEffects(pet)
    end
end

-- Kiá»ƒm tra khi game báº¯t Ä‘áº§u
checkAndDisablePet()

-- NgoÃ i ra, cÃ³ thá»ƒ láº¯ng nghe khi Pet spawn má»›i
workspace.ChildAdded:Connect(function(child)
    if child.Name == "Pet" then -- Thay báº±ng tÃªn Ä‘Ãºng cá»§a Pet
        task.wait(0.2)
        disablePetEffects(child)
    end
end)

print("âœ… Giáº£m Ä‘á»“ hoáº¡, táº¯t hiá»‡u á»©ng Pet vÃ  hiá»‡u á»©ng mÃ u hoÃ n táº¥t!")

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInput = game:GetService("VirtualInputManager")

local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local humanoid = char:WaitForChild("Humanoid")

local holdTime = 3
local restTime = 0.7
local followDistance = 1.2
local checkInterval = 1.2

local allowedKeywords = { "Brainrot God", "Secret" }
local startPos, endPos = nil, nil
local autoRunning = false
local lastPet = nil

-- Táº¡o GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoPET_GUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = lp:WaitForChild("PlayerGui")

local function createButton(text, posY)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 220, 0, 40)
    btn.Position = UDim2.new(0, 10, 0, posY)
    btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Text = text
    btn.Parent = screenGui
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 20
    btn.BorderSizePixel = 0
    return btn
end

local startBtn = createButton("â–¶ï¸ Báº¯t Ä‘áº§u", 100)
local setStartBtn = createButton("ðŸ“ LÆ°u tá»a Ä‘á»™ Ä‘áº§u", 150)
local setEndBtn = createButton("ðŸ“ LÆ°u tá»a Ä‘á»™ cuá»‘i", 200)

-- HÃ m kiá»ƒm tra tÃªn pet
local function isAllowedPet(name)
    for _, word in ipairs(allowedKeywords) do
        if string.lower(name):find(string.lower(word)) then
            return true
        end
    end
    return false
end

-- Kiá»ƒm tra tá»a Ä‘á»™ vÃ¹ng
local function isInZone(pos)
    if not startPos or not endPos then return false end
    local minX, maxX = math.min(startPos.X, endPos.X), math.max(startPos.X, endPos.X)
    local minZ, maxZ = math.min(startPos.Z, endPos.Z), math.max(startPos.Z, endPos.Z)
    return pos.X >= minX and pos.X <= maxX and pos.Z >= minZ and pos.Z <= maxZ
end

-- TÃ¬m PET gáº§n nháº¥t
local function findClosestPet()
    local nearest, nearestDist = nil, math.huge
    for _, label in ipairs(workspace:GetDescendants()) do
        if label:IsA("TextLabel") then
            local name = label.Text
            if isAllowedPet(name) then
                local model = label:FindFirstAncestorOfClass("Model")
                local root = model and model:FindFirstChildWhichIsA("BasePart")
                if model and root and model:IsDescendantOf(workspace) and isInZone(root.Position) then
                    local dist = (hrp.Position - root.Position).Magnitude
                    if dist < nearestDist then
                        nearest = { model = model, root = root, name = name }
                        nearestDist = dist
                    end
                end
            end
        end
    end

    if nearest then
        print("âœ… TÃ¬m tháº¥y PET:", nearest.name, "CÃ¡ch:", math.floor(nearestDist))
    else
        print("ðŸ” KhÃ´ng tÃ¬m tháº¥y PET phÃ¹ há»£p.")
    end

    return nearest
end

-- Giá»¯ phÃ­m E tháº­t
local function pressE(seconds)
    VirtualInput:SendKeyEvent(true, Enum.KeyCode.E, false, game)
    wait(seconds)
    VirtualInput:SendKeyEvent(false, Enum.KeyCode.E, false, game)
end

-- Theo dÃµi PET vÃ  giá»¯ E
local function holdEOnPet(pet)
    if not pet or not pet.root or not pet.model then return end
    print("ðŸš¶â€â™‚ï¸ Di chuyá»ƒn Ä‘áº¿n PET:", pet.name)

    -- Di chuyá»ƒn Ä‘áº¿n gáº§n
    local moveStart = tick()
    while tick() - moveStart < 5 do
        if not pet.model:IsDescendantOf(workspace) or not isInZone(pet.root.Position) then return end
        local dist = (hrp.Position - pet.root.Position).Magnitude
        if dist <= followDistance then break end
        humanoid:MoveTo(Vector3.new(pet.root.Position.X, hrp.Position.Y, pet.root.Position.Z))
        wait(0.1)
    end

    -- Theo dÃµi PET
    local followConn
    followConn = RunService.RenderStepped:Connect(function()
        if not pet.model:IsDescendantOf(workspace) or not isInZone(pet.root.Position) then
            followConn:Disconnect()
            return
        end
        local dist = (hrp.Position - pet.root.Position).Magnitude
        if dist > followDistance then
            humanoid:MoveTo(Vector3.new(pet.root.Position.X, hrp.Position.Y, pet.root.Position.Z))
        else
            humanoid:MoveTo(hrp.Position)
        end
    end)

    -- Giá»¯ E liÃªn tá»¥c
    while true do
        if not pet.model:IsDescendantOf(workspace) or not isInZone(pet.root.Position) then
            print("âŒ PET biáº¿n máº¥t hoáº·c ra khá»i vÃ¹ng.")
            break
        end
        pressE(holdTime)
        wait(restTime)
    end

    if followConn then followConn:Disconnect() end
    print("ðŸ›‘ Dá»«ng theo PET:", pet.name)
end

-- VÃ²ng tÃ¬m PET
task.spawn(function()
    while true do
        wait(checkInterval)
        if autoRunning and startPos and endPos then
            local pet = findClosestPet()
            if pet and (not lastPet or pet.model ~= lastPet.model) then
                lastPet = pet
                holdEOnPet(pet)
            elseif not pet then
                lastPet = nil
            end
        end
    end
end)

-- NÃºt GUI
setStartBtn.MouseButton1Click:Connect(function()
    startPos = hrp.Position
    setStartBtn.Text = "âœ… ÄÃ£ lÆ°u tá»a Ä‘á»™ Ä‘áº§u"
end)

setEndBtn.MouseButton1Click:Connect(function()
    endPos = hrp.Position
    setEndBtn.Text = "âœ… ÄÃ£ lÆ°u tá»a Ä‘á»™ cuá»‘i"
end)

startBtn.MouseButton1Click:Connect(function()
    if startPos and endPos then
        autoRunning = not autoRunning
        startBtn.Text = autoRunning and "â¹ Äang cháº¡y..." or "â–¶ï¸ Báº¯t Ä‘áº§u"
    else
        warn("âš ï¸ Cáº§n lÆ°u tá»a Ä‘á»™ Ä‘áº§u vÃ  cuá»‘i trÆ°á»›c.")
    end
end)

-- Auto Ä‘i láº¡i má»—i 5 phÃºt
local function autoWalkBetweenPoints()
    local running = false
    local function moveTo(pos)
        humanoid:MoveTo(Vector3.new(pos.X, hrp.Position.Y, pos.Z))
        local timeout = 15
        local startTime = tick()
        while (hrp.Position - pos).Magnitude > 3 and tick() - startTime < timeout do
            if not autoRunning then break end
            wait(0.2)
        end
    end

    task.spawn(function()
        while true do
            if not autoRunning then wait(1) continue end
            wait(300)
            if startPos and endPos and not running then
                running = true
                print("âž¡ï¸ Äi Ä‘áº¿n cuá»‘i")
                moveTo(endPos)
                wait(1)
                print("â¬…ï¸ Quay vá» Ä‘áº§u")
                moveTo(startPos)
                running = false
            end
        end
    end)
end

autoWalkBetweenPoints()


local Players = game:GetService("Players")
local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")
local hrp = char:WaitForChild("HumanoidRootPart")

local positions = {
	Vector3.new(-414.36, -6.50, 75.70),    -- ðŸ“Vá»‹ trÃ­ 1
	Vector3.new(-410.32, -6.50, 255.72),   -- ðŸ“Vá»‹ trÃ­ 2
	Vector3.new(-411.93, -6.50, -137.21),  -- ðŸ“Vá»‹ trÃ­ 3
}

-- Táº¡o GUI cho nÃºt
local tpGui = Instance.new("ScreenGui")
tpGui.Name = "TP_Run_GUI"
tpGui.ResetOnSpawn = false
tpGui.Parent = lp:WaitForChild("PlayerGui")

local function createRunButton(name, posY, position)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0, 180, 0, 40)
	btn.Position = UDim2.new(1, -190, 0, posY)
	btn.AnchorPoint = Vector2.new(0, 0)
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 20
	btn.Text = name
	btn.Parent = tpGui

	btn.MouseButton1Click:Connect(function()
		local character = lp.Character or lp.CharacterAdded:Wait()
		local humanoid = character:FindFirstChildOfClass("Humanoid")
		if humanoid then
			humanoid:MoveTo(position)
		end
	end)
end

-- Táº¡o 3 nÃºt
createRunButton("ðŸƒ Tá»›i Ä‘iá»ƒm 1", 100, positions[1])
createRunButton("ðŸƒ Tá»›i Ä‘iá»ƒm 2", 150, positions[2])
createRunButton("ðŸƒ Tá»›i Ä‘iá»ƒm 3", 200, positions[3])

task.spawn(function()
    local Players = game:GetService("Players")
    local lp = Players.LocalPlayer
    local char = lp.Character or lp.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    local humanoid = char:WaitForChild("Humanoid")
    local VirtualInput = game:GetService("VirtualInputManager")

    -- Di chuyá»ƒn
    local function moveTo(pos)
        humanoid:MoveTo(Vector3.new(pos.X, hrp.Position.Y, pos.Z))
        local timeout = 20
        local startTime = tick()
        while (hrp.Position - pos).Magnitude > 3 and tick() - startTime < timeout do
            wait(0.2)
        end
        wait(2)
    end

    -- Báº¥m nÃºt báº±ng vá»‹ trÃ­ mÃ n hÃ¬nh
    local function clickGuiButtonByText(text)
        local gui = lp:WaitForChild("PlayerGui"):FindFirstChild("AutoPET_GUI")
        if not gui then return end
        for _, btn in pairs(gui:GetChildren()) do
            if btn:IsA("TextButton") and btn.Text == text then
                local absPos = btn.AbsolutePosition
                local absSize = btn.AbsoluteSize
                local clickX = absPos.X + absSize.X / 2
                local clickY = absPos.Y + absSize.Y / 2
                print("ðŸ–±ï¸ Click vÃ o:", text)
                VirtualInput:SendMouseButtonEvent(clickX, clickY, 0, true, game, 0)
                VirtualInput:SendMouseButtonEvent(clickX, clickY, 0, false, game, 0)
                return
            end
        end
        warn("âŒ KhÃ´ng tÃ¬m tháº¥y nÃºt:", text)
    end

    -- ==== QUY TRÃŒNH Tá»° Äá»˜NG ====
    print("âž¡ï¸ Tá»›i vá»‹ trÃ­ 1")
    moveTo(Vector3.new(-414.36, -6.50, 75.70))

    print("âž¡ï¸ Tá»›i vá»‹ trÃ­ 2")
    moveTo(Vector3.new(-410.32, -6.50, 255.72))
    clickGuiButtonByText("ðŸ“ LÆ°u tá»a Ä‘á»™ cuá»‘i")
    wait(1)

    print("âž¡ï¸ Tá»›i vá»‹ trÃ­ 3 (1)")
    moveTo(Vector3.new(-411.93, -6.50, -137.21))
    print("âž¡ï¸ Tá»›i vá»‹ trÃ­ 3 (2)")
    moveTo(Vector3.new(-411.93, -6.50, -137.21))
    clickGuiButtonByText("ðŸ“ LÆ°u tá»a Ä‘á»™ Ä‘áº§u")

    wait(3)
    clickGuiButtonByText("â–¶ï¸ Báº¯t Ä‘áº§u")
end)
